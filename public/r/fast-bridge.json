{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "fast-bridge",
  "type": "registry:component",
  "title": "Fast Bridge",
  "description": "A simple component built with Nexus to enable cross chain bridging",
  "dependencies": [
    "@avail-project/nexus-core@1.0.0-beta.22",
    "@radix-ui/react-accordion",
    "@radix-ui/react-dialog",
    "@radix-ui/react-label",
    "@radix-ui/react-select",
    "@radix-ui/react-slot",
    "class-variance-authority",
    "clsx",
    "lucide-react",
    "tailwind-merge"
  ],
  "registryDependencies": [
    "https://elements.nexus.availproject.org/r/accordion.json",
    "https://elements.nexus.availproject.org/r/button.json",
    "https://elements.nexus.availproject.org/r/card.json",
    "https://elements.nexus.availproject.org/r/dialog.json",
    "https://elements.nexus.availproject.org/r/input.json",
    "https://elements.nexus.availproject.org/r/label.json",
    "https://elements.nexus.availproject.org/r/select.json",
    "https://elements.nexus.availproject.org/r/skeleton.json",
    "https://elements.nexus.availproject.org/r/nexus-provider.json",
    "https://elements.nexus.availproject.org/r/utils.json"
  ],
  "files": [
    {
      "path": "registry/nexus-elements/fast-bridge/fast-bridge.tsx",
      "content": "\"use client\";\nimport React, { FC } from \"react\";\nimport { Card, CardContent } from \"../ui/card\";\nimport ChainSelect from \"./components/chain-select\";\nimport TokenSelect from \"./components/token-select\";\nimport { Button } from \"../ui/button\";\nimport { LoaderPinwheel, X } from \"lucide-react\";\nimport { useNexus } from \"../nexus/NexusProvider\";\nimport AmountInput from \"./components/amount-input\";\nimport FeeBreakdown from \"./components/fee-breakdown\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"../ui/dialog\";\nimport TransactionProgress from \"./components/transaction-progress\";\nimport AllowanceModal from \"./components/allowance-modal\";\nimport useBridge from \"./hooks/useBridge\";\nimport SourceBreakdown from \"./components/source-breakdown\";\nimport { type SUPPORTED_TOKENS } from \"@avail-project/nexus-core\";\nimport { type Address } from \"viem\";\nimport { Skeleton } from \"../ui/skeleton\";\nimport RecipientAddress from \"./components/recipient-address\";\n\ninterface FastBridgeProps {\n  connectedAddress: Address;\n  prefill?: {\n    token: string;\n    chainId: number;\n    amount?: string;\n    recipient?: Address;\n  };\n  onComplete?: () => void;\n}\n\nconst FastBridge: FC<FastBridgeProps> = ({\n  connectedAddress,\n  onComplete,\n  prefill,\n}) => {\n  const {\n    nexusSDK,\n    intent,\n    setIntent,\n    unifiedBalance,\n    allowance,\n    setAllowance,\n    network,\n  } = useNexus();\n\n  const {\n    inputs,\n    setInputs,\n    timer,\n    loading,\n    refreshing,\n    isDialogOpen,\n    txError,\n    setTxError,\n    handleTransaction,\n    reset,\n    filteredUnifiedBalance,\n    startTransaction,\n    setIsDialogOpen,\n    stopTimer,\n    commitAmount,\n    lastExplorerUrl,\n    steps,\n  } = useBridge({\n    prefill,\n    network: network ?? \"mainnet\",\n    connectedAddress,\n    nexusSDK,\n    intent,\n    setIntent,\n    unifiedBalance,\n    setAllowance,\n    onComplete,\n  });\n\n  const allCompleted = steps?.length > 0 && steps.every((s) => s.completed);\n  React.useEffect(() => {\n    if (allCompleted) {\n      stopTimer();\n    }\n  }, [allCompleted, stopTimer]);\n\n  return (\n    <Card className=\"w-full max-w-xl\">\n      <CardContent className=\"flex flex-col gap-y-4 w-full\">\n        <ChainSelect\n          selectedChain={inputs?.chain}\n          handleSelect={(chain) =>\n            setInputs({\n              ...inputs,\n              chain,\n            })\n          }\n          label=\"To\"\n          disabled={!!prefill?.chainId}\n        />\n        <TokenSelect\n          selectedChain={inputs?.chain}\n          selectedToken={inputs?.token}\n          handleTokenSelect={(token) => setInputs({ ...inputs, token })}\n          disabled={!!prefill?.token}\n        />\n        <AmountInput\n          amount={inputs?.amount}\n          onChange={(amount) => setInputs({ ...inputs, amount })}\n          unifiedBalance={filteredUnifiedBalance}\n          onCommit={() => void commitAmount()}\n          disabled={refreshing || !!prefill?.amount}\n          inputs={inputs}\n        />\n        <RecipientAddress\n          address={inputs?.recipient}\n          onChange={(address) =>\n            setInputs({ ...inputs, recipient: address as `0x${string}` })\n          }\n          disabled={!!prefill?.recipient}\n        />\n        {intent?.intent && (\n          <>\n            <SourceBreakdown\n              intent={intent?.intent}\n              tokenSymbol={filteredUnifiedBalance?.symbol as SUPPORTED_TOKENS}\n              isLoading={refreshing}\n            />\n            <div className=\"w-full flex items-start justify-between gap-x-4\">\n              <p className=\"text-base font-semibold\">You receive</p>\n              <div className=\"flex flex-col gap-y-1 min-w-fit\">\n                {refreshing ? (\n                  <Skeleton className=\"h-5 w-28\" />\n                ) : (\n                  <p className=\"text-base font-semibold text-right\">\n                    {intent?.intent?.destination?.amount}{\" \"}\n                    {filteredUnifiedBalance?.symbol}\n                  </p>\n                )}\n                {refreshing ? (\n                  <Skeleton className=\"h-4 w-36\" />\n                ) : (\n                  <p className=\"text-sm font-medium text-right\">\n                    on {intent?.intent?.destination?.chainName}\n                  </p>\n                )}\n              </div>\n            </div>\n            <FeeBreakdown intent={intent?.intent} isLoading={refreshing} />\n          </>\n        )}\n\n        {!intent && (\n          <Button\n            onClick={handleTransaction}\n            disabled={\n              !inputs?.amount ||\n              !inputs?.recipient ||\n              !inputs?.chain ||\n              !inputs?.token ||\n              loading\n            }\n          >\n            {loading ? (\n              <LoaderPinwheel className=\"animate-spin size-5\" />\n            ) : (\n              \"Bridge\"\n            )}\n          </Button>\n        )}\n        <Dialog\n          open={isDialogOpen}\n          onOpenChange={(open) => {\n            if (loading) return;\n            setIsDialogOpen(open);\n          }}\n        >\n          {intent && (\n            <div className=\"w-full flex items-center gap-x-2 justify-between\">\n              <Button variant={\"destructive\"} onClick={reset} className=\"w-1/2\">\n                Deny\n              </Button>\n              <DialogTrigger asChild>\n                <Button\n                  onClick={startTransaction}\n                  className=\"w-1/2\"\n                  disabled={refreshing}\n                >\n                  {refreshing ? \"Refreshing...\" : \"Accept\"}\n                </Button>\n              </DialogTrigger>\n            </div>\n          )}\n          <DialogContent>\n            <DialogHeader className=\"sr-only\">\n              <DialogTitle>Transaction Progress</DialogTitle>\n            </DialogHeader>\n            <TransactionProgress\n              timer={timer}\n              steps={steps}\n              viewIntentUrl={lastExplorerUrl}\n              operationType={\"bridge\"}\n            />\n          </DialogContent>\n        </Dialog>\n        {allowance && (\n          <AllowanceModal\n            allowanceModal={allowance}\n            setAllowanceModal={setAllowance}\n            callback={startTransaction}\n            onCloseCallback={reset}\n          />\n        )}\n\n        {txError && (\n          <div className=\"rounded-md border border-destructive bg-destructive/80 px-3 py-2 text-sm text-destructive-foreground flex items-start justify-between gap-x-3 mt-3 w-full max-w-lg\">\n            <span className=\"flex-1 w-md truncate\">{txError}</span>\n            <Button\n              type=\"button\"\n              size={\"icon\"}\n              variant={\"ghost\"}\n              onClick={() => {\n                reset();\n                setTxError(null);\n              }}\n              className=\"text-destructive-foreground/80 hover:text-destructive-foreground focus:outline-none\"\n              aria-label=\"Dismiss error\"\n            >\n              <X className=\"size-4\" />\n            </Button>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default FastBridge;\n",
      "type": "registry:component",
      "target": "components/fast-bridge/fast-bridge.tsx"
    },
    {
      "path": "registry/nexus-elements/fast-bridge/components/allowance-modal.tsx",
      "content": "\"use client\";\nimport React, { FC, useEffect, useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"../../ui/dialog\";\nimport { Button } from \"../../ui/button\";\nimport { Input } from \"../../ui/input\";\nimport { Label } from \"../../ui/label\";\nimport {\n  type AllowanceHookSource,\n  CHAIN_METADATA,\n  type OnAllowanceHookData,\n} from \"@avail-project/nexus-core\";\nimport { useNexus } from \"../../nexus/NexusProvider\";\n\ninterface AllowanceModalProps {\n  allowanceModal: OnAllowanceHookData | null;\n  setAllowanceModal: React.Dispatch<\n    React.SetStateAction<OnAllowanceHookData | null>\n  >;\n  callback?: () => void;\n  onCloseCallback?: () => void;\n}\n\nconst AllowanceModal: FC<AllowanceModalProps> = ({\n  allowanceModal,\n  setAllowanceModal,\n  callback,\n  onCloseCallback,\n}) => {\n  const { nexusSDK } = useNexus();\n  const [selectedOption, setSelectedOption] = useState<string[]>([]);\n  const [customValues, setCustomValues] = useState<string[]>([]);\n\n  useEffect(() => {\n    if (allowanceModal) {\n      setSelectedOption(\n        Array.from({ length: allowanceModal.sources.length }, () => \"min\")\n      );\n      setCustomValues(\n        Array.from({ length: allowanceModal.sources.length }, () => \"\")\n      );\n    }\n  }, [allowanceModal]);\n\n  if (!allowanceModal) return null;\n\n  const { sources, allow, deny } = allowanceModal;\n\n  const onClose = () => {\n    deny();\n    setAllowanceModal(null);\n    onCloseCallback?.();\n  };\n\n  const onApprove = () => {\n    const processed = sources.map((_, i) => {\n      const opt = selectedOption[i];\n      if (opt === \"min\" || opt === \"max\") return opt;\n      const v = customValues[i];\n      if (v && Number.isNaN(v)) return v;\n      return \"min\";\n    });\n    try {\n      allow(processed);\n      setAllowanceModal(null);\n      callback?.();\n    } catch (error) {\n      console.error(error);\n      onCloseCallback?.();\n    }\n  };\n\n  return (\n    <Dialog\n      open={!!allowanceModal}\n      onOpenChange={(isOpen) => !isOpen && onClose()}\n    >\n      <DialogContent className=\"w-full sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Set Token Allowances</DialogTitle>\n          <DialogDescription>\n            Select minimum, maximum, or a custom allowance for each required\n            token.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-2 max-h-[60vh] overflow-y-auto\">\n          {sources?.map((source: AllowanceHookSource, index: number) => (\n            <div\n              key={`${source.token.symbol}-${index}`}\n              className=\"p-3 border rounded-lg\"\n            >\n              <div className=\"flex items-center justify-between gap-x-2\">\n                <div className=\"flex items-center gap-x-2\">\n                  <img\n                    src={CHAIN_METADATA[source.chain.id]?.logo}\n                    alt={source.chain.name}\n                    width={20}\n                    height={20}\n                    className=\"rounded-full\"\n                  />\n                  <p className=\"font-semibold\">\n                    {source.token.symbol} on {source.chain.name}\n                  </p>\n                </div>\n                <div className=\"text-sm\">\n                  <span className=\"mr-1 text-muted-foreground\">Current:</span>\n                  <span className=\"font-semibold\">\n                    {nexusSDK?.utils.formatBalance(\n                      source.allowance.current,\n                      source.token.decimals\n                    )}\n                  </span>\n                </div>\n              </div>\n\n              <div className=\"mt-3 grid grid-cols-1 gap-2\">\n                <Label className=\"flex items-center gap-x-2\">\n                  <Input\n                    type=\"radio\"\n                    name={`allowance-${index}`}\n                    value=\"min\"\n                    checked={selectedOption[index] === \"min\"}\n                    onChange={() => {\n                      const next = [...selectedOption];\n                      next[index] = \"min\";\n                      setSelectedOption(next);\n                    }}\n                    className=\"w-10\"\n                  />\n                  <span>\n                    Minimum (\n                    {nexusSDK?.utils.formatBalance(\n                      source.allowance.minimum,\n                      source.token.decimals\n                    )}\n                    )\n                  </span>\n                </Label>\n\n                <Label className=\"flex items-center gap-x-2\">\n                  <Input\n                    type=\"radio\"\n                    name={`allowance-${index}`}\n                    value=\"max\"\n                    checked={selectedOption[index] === \"max\"}\n                    onChange={() => {\n                      const next = [...selectedOption];\n                      next[index] = \"max\";\n                      setSelectedOption(next);\n                    }}\n                    className=\"w-10\"\n                  />\n                  <span>Maximum (Unlimited)</span>\n                </Label>\n\n                <div className=\"flex items-center gap-x-2\">\n                  <Input\n                    type=\"radio\"\n                    name={`allowance-${index}`}\n                    value=\"custom\"\n                    checked={selectedOption[index] === \"custom\"}\n                    onChange={() => {\n                      const next = [...selectedOption];\n                      next[index] = \"custom\";\n                      setSelectedOption(next);\n                    }}\n                    className=\"w-10\"\n                  />\n                  <Label className=\"mr-2\">Custom Amount</Label>\n                  <Input\n                    type=\"number\"\n                    step=\"any\"\n                    min=\"0\"\n                    placeholder=\"Enter custom amount\"\n                    value={\n                      selectedOption[index] === \"custom\"\n                        ? customValues[index]\n                        : \"\"\n                    }\n                    onChange={(e) => {\n                      const next = [...customValues];\n                      next[index] = e.target.value;\n                      setCustomValues(next);\n                    }}\n                    className=\"h-8 w-40\"\n                  />\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <DialogFooter className=\"gap-2 sm:justify-end mt-2\">\n          <Button\n            variant=\"destructive\"\n            onClick={onClose}\n            className=\"font-semibold\"\n          >\n            Deny\n          </Button>\n          <Button onClick={onApprove} className=\"font-semibold\">\n            Approve Selected\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default AllowanceModal;\n",
      "type": "registry:component",
      "target": "components/fast-bridge/components/allowance-modal.tsx"
    },
    {
      "path": "registry/nexus-elements/fast-bridge/components/amount-input.tsx",
      "content": "import React, { FC, useEffect, useRef } from \"react\";\nimport { Input } from \"../../ui/input\";\nimport { Button } from \"../../ui/button\";\nimport { type UserAsset } from \"@avail-project/nexus-core\";\nimport { useNexus } from \"../../nexus/NexusProvider\";\nimport { FastBridgeState } from \"../hooks/useBridge\";\n\ninterface AmountInputProps {\n  amount?: string;\n  onChange: (value: string) => void;\n  unifiedBalance?: UserAsset;\n  onCommit?: (value: string) => void;\n  disabled?: boolean;\n  inputs: FastBridgeState;\n}\n\nconst AmountInput: FC<AmountInputProps> = ({\n  amount,\n  onChange,\n  unifiedBalance,\n  onCommit,\n  disabled,\n  inputs,\n}) => {\n  const { nexusSDK } = useNexus();\n  const commitTimerRef = useRef<NodeJS.Timeout | null>(null);\n\n  const scheduleCommit = (val: string) => {\n    if (!onCommit || disabled) return;\n    if (commitTimerRef.current) clearTimeout(commitTimerRef.current);\n    commitTimerRef.current = setTimeout(() => {\n      onCommit(val);\n    }, 800);\n  };\n\n  const onMaxClick = async () => {\n    if (!nexusSDK || !inputs) return;\n    const maxBalAvailable = await nexusSDK?.calculateMaxForBridge({\n      token: inputs?.token,\n      toChainId: inputs?.chain,\n      recipient: inputs?.recipient,\n    });\n    if (!maxBalAvailable) return;\n    onChange(maxBalAvailable.amount);\n    onCommit?.(maxBalAvailable.amount);\n  };\n\n  useEffect(() => {\n    return () => {\n      if (commitTimerRef.current) {\n        clearTimeout(commitTimerRef.current);\n        commitTimerRef.current = null;\n      }\n    };\n  }, []);\n\n  return (\n    <div className=\"w-full flex border border-border rounded-lg gap-y-2\">\n      <Input\n        type=\"text\"\n        inputMode=\"decimal\"\n        value={amount ?? \"\"}\n        placeholder=\"Enter Amount\"\n        onChange={(e) => {\n          let next = e.target.value.replaceAll(/[^0-9.]/g, \"\");\n          const parts = next.split(\".\");\n          if (parts.length > 2) next = parts[0] + \".\" + parts.slice(1).join(\"\");\n          if (next === \".\") next = \"0.\";\n          onChange(next);\n          scheduleCommit(next);\n        }}\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\") {\n            if (commitTimerRef.current) {\n              clearTimeout(commitTimerRef.current);\n              commitTimerRef.current = null;\n            }\n            onCommit?.(amount ?? \"\");\n          }\n        }}\n        className=\"w-full border-none bg-transparent rounded-r-none focus-visible:ring-0 focus-visible:ring-offset-0 shadow-none py-0 px-3\"\n        aria-invalid={Boolean(amount) && Number.isNaN(Number(amount))}\n        disabled={disabled}\n      />\n      <div className=\"flex items-center justify-end-safe gap-x-4 w-fit px-2 border-l border-border\">\n        <div className=\"flex items-center gap-x-3 min-w-max\">\n          {unifiedBalance && (\n            <p className=\"text-base font-semibold\">\n              {Number.parseFloat(unifiedBalance?.balance)?.toFixed(6)}{\" \"}\n              {unifiedBalance?.symbol}\n            </p>\n          )}\n          <Button\n            size={\"sm\"}\n            variant={\"ghost\"}\n            onClick={onMaxClick}\n            className=\"px-0\"\n            disabled={disabled}\n          >\n            Max\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AmountInput;\n",
      "type": "registry:component",
      "target": "components/fast-bridge/components/amount-input.tsx"
    },
    {
      "path": "registry/nexus-elements/fast-bridge/components/source-breakdown.tsx",
      "content": "import {\n  type ReadableIntent,\n  type SUPPORTED_TOKENS,\n} from \"@avail-project/nexus-core\";\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from \"../../ui/accordion\";\nimport { Skeleton } from \"../../ui/skeleton\";\n\ninterface SourceBreakdownProps {\n  intent?: ReadableIntent;\n  tokenSymbol: SUPPORTED_TOKENS;\n  isLoading?: boolean;\n}\n\nconst SourceBreakdown = ({\n  intent,\n  tokenSymbol,\n  isLoading = false,\n}: SourceBreakdownProps) => {\n  return (\n    <Accordion type=\"single\" collapsible className=\"w-full\">\n      <AccordionItem value=\"sources\">\n        <div className=\"flex items-start justify-between gap-x-4 w-full\">\n          {isLoading ? (\n            <>\n              <div className=\"flex flex-col items-start gap-y-1 min-w-fit\">\n                <p className=\"text-base font-semibold\">You Spend</p>\n                <Skeleton className=\"h-4 w-44\" />\n              </div>\n              <div className=\"flex flex-col items-end gap-y-1 min-w-fit\">\n                <Skeleton className=\"h-5 w-24\" />\n                <div className=\"w-fit\">\n                  <Skeleton className=\"h-4 w-24\" />\n                </div>\n              </div>\n            </>\n          ) : (\n            intent?.sources && (\n              <>\n                <div className=\"flex flex-col items-start gap-y-1 min-w-fit\">\n                  <p className=\"text-base font-semibold\">You Spend</p>\n                  <p className=\"text-sm font-medium\">\n                    {intent?.sources?.length > 1\n                      ? `${intent?.sources?.length} Assets on ${intent?.sources?.length} chains`\n                      : `${intent?.sources?.length} asset on ${intent?.sources?.length} chain`}\n                  </p>\n                </div>\n\n                <div className=\"flex flex-col items-end gap-y-1 min-w-fit\">\n                  <p className=\"text-base font-semibold\">\n                    {intent?.sourcesTotal} {tokenSymbol}\n                  </p>\n                  <AccordionTrigger\n                    containerClassName=\"w-fit\"\n                    className=\"py-0 items-center gap-x-1\"\n                    hideChevron={false}\n                  >\n                    <p className=\"text-sm font-medium\">View Sources</p>\n                  </AccordionTrigger>\n                </div>\n              </>\n            )\n          )}\n        </div>\n        {!isLoading && intent?.sources && (\n          <AccordionContent className=\"my-4 bg-muted pb-0 px-4 py-2 rounded-lg w-full\">\n            <div className=\"flex flex-col items-center gap-y-3\">\n              {intent?.sources?.map((source) => (\n                <div\n                  key={source.chainID}\n                  className=\"flex items-center justify-between w-full gap-x-2\"\n                >\n                  <div className=\"flex items-center gap-x-2\">\n                    <img\n                      src={source?.chainLogo}\n                      alt={source?.chainName}\n                      width={20}\n                      height={20}\n                      className=\"rounded-full\"\n                    />\n                    <p className=\"text-sm font-semibold\">{source.chainName}</p>\n                  </div>\n\n                  <p className=\"text-sm font-semibold\">\n                    {source.amount} {tokenSymbol}\n                  </p>\n                </div>\n              ))}\n            </div>\n          </AccordionContent>\n        )}\n      </AccordionItem>\n    </Accordion>\n  );\n};\n\nexport default SourceBreakdown;\n",
      "type": "registry:component",
      "target": "components/fast-bridge/components/source-breakdown.tsx"
    },
    {
      "path": "registry/nexus-elements/fast-bridge/components/chain-select.tsx",
      "content": "import React, { FC, useMemo } from \"react\";\nimport { Label } from \"../../ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"../../ui/select\";\nimport { type SUPPORTED_CHAINS_IDS } from \"@avail-project/nexus-core\";\nimport { cn } from \"@/lib/utils\";\nimport { useNexus } from \"../../nexus/NexusProvider\";\n\ninterface ChainSelectProps {\n  selectedChain: number;\n  disabled?: boolean;\n  hidden?: boolean;\n  className?: string;\n  label?: string;\n  handleSelect: (chainId: SUPPORTED_CHAINS_IDS) => void;\n}\n\nconst ChainSelect: FC<ChainSelectProps> = ({\n  selectedChain,\n  disabled,\n  hidden = false,\n  className,\n  label,\n  handleSelect,\n}) => {\n  const { supportedChainsAndTokens } = useNexus();\n\n  const selectedChainData = useMemo(() => {\n    if (!supportedChainsAndTokens) return null;\n    return supportedChainsAndTokens.find((c) => c.id === selectedChain);\n  }, [selectedChain, supportedChainsAndTokens]);\n\n  if (hidden) return null;\n  return (\n    <Select\n      value={selectedChain?.toString() ?? \"\"}\n      onValueChange={(value) => {\n        if (!disabled) {\n          handleSelect(parseInt(value) as SUPPORTED_CHAINS_IDS);\n        }\n      }}\n    >\n      <div className=\"flex flex-col items-start gap-y-1 w-full\">\n        {label && <Label className=\"text-sm font-semibold\">{label}</Label>}\n        <SelectTrigger disabled={disabled} className=\" w-full\">\n          <SelectValue>\n            {selectedChainData && (\n              <div\n                className={cn(\"flex items-center gap-x-2 w-full\", className)}\n              >\n                <img\n                  src={selectedChainData?.logo}\n                  alt={selectedChainData?.name}\n                  width={24}\n                  height={24}\n                  className=\"rounded-full\"\n                />\n                <p className=\"text-primary test-sm\">\n                  {selectedChainData?.name}\n                </p>\n              </div>\n            )}\n          </SelectValue>\n        </SelectTrigger>\n      </div>\n\n      <SelectContent>\n        <SelectGroup>\n          {supportedChainsAndTokens?.map((chain) => {\n            return (\n              <SelectItem key={chain.id} value={String(chain.id)}>\n                <div className=\"flex items-center gap-x-2 my-1\">\n                  <img\n                    src={chain.logo}\n                    alt={chain?.name}\n                    width={24}\n                    height={24}\n                    className=\"rounded-full\"\n                  />\n                  <p className=\"text-primary test-sm\">{chain.name}</p>\n                </div>\n              </SelectItem>\n            );\n          })}\n        </SelectGroup>\n      </SelectContent>\n    </Select>\n  );\n};\n\nexport default ChainSelect;\n",
      "type": "registry:component",
      "target": "components/fast-bridge/components/chain-select.tsx"
    },
    {
      "path": "registry/nexus-elements/fast-bridge/components/fee-breakdown.tsx",
      "content": "import React, { FC } from \"react\";\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from \"../../ui/accordion\";\nimport { type ReadableIntent } from \"@avail-project/nexus-core\";\nimport { Skeleton } from \"../../ui/skeleton\";\n\ninterface FeeBreakdownProps {\n  intent: ReadableIntent;\n  isLoading?: boolean;\n}\n\nconst FeeBreakdown: FC<FeeBreakdownProps> = ({ intent, isLoading = false }) => {\n  return (\n    <Accordion type=\"single\" collapsible className=\"w-full\">\n      <AccordionItem value=\"breakdown\">\n        <div className=\"w-full flex items-start justify-between\">\n          <p className=\"font-semibold text-base\">Total fees</p>\n\n          <div className=\"flex flex-col items-end justify-end-safe gap-y-1\">\n            {isLoading ? (\n              <Skeleton className=\"h-5 w-24\" />\n            ) : (\n              <p className=\"font-semibold text-base min-w-max\">\n                {intent.fees?.total} {intent.token?.symbol}\n              </p>\n            )}\n            <AccordionTrigger\n              containerClassName=\"w-fit\"\n              className=\"p-0 items-center gap-x-1\"\n              hideChevron={false}\n            >\n              <p className=\"text-sm font-medium\">View Breakup</p>\n            </AccordionTrigger>\n          </div>\n        </div>\n        <AccordionContent>\n          <div className=\"w-full flex flex-col items-center justify-between gap-y-3 bg-muted px-4 py-2 rounded-lg mt-2\">\n            <div className=\"flex items-center w-full justify-between\">\n              <p className=\"text-sm font-semibold\">Fast Bridge Gas Fee</p>\n              {isLoading ? (\n                <Skeleton className=\"h-4 w-20\" />\n              ) : (\n                <p className=\"text-sm font-semibold\">\n                  {intent?.fees?.caGas} {intent?.token?.symbol}\n                </p>\n              )}\n            </div>\n            <div className=\"flex items-center w-full justify-between\">\n              <p className=\"text-sm font-semibold\">Gas Supplied</p>\n              {isLoading ? (\n                <Skeleton className=\"h-4 w-20\" />\n              ) : (\n                <p className=\"text-sm font-semibold\">\n                  {intent?.fees?.gasSupplied} {intent?.token?.symbol}\n                </p>\n              )}\n            </div>\n            <div className=\"flex items-center w-full justify-between\">\n              <p className=\"text-sm font-semibold\">Solver Fees</p>\n              {isLoading ? (\n                <Skeleton className=\"h-4 w-20\" />\n              ) : (\n                <p className=\"text-sm font-semibold\">\n                  {intent?.fees?.solver} {intent?.token?.symbol}\n                </p>\n              )}\n            </div>\n            <div className=\"flex items-center w-full justify-between\">\n              <p className=\"text-sm font-semibold\">Protocol Fees</p>\n              {isLoading ? (\n                <Skeleton className=\"h-4 w-20\" />\n              ) : (\n                <p className=\"text-sm font-semibold\">\n                  {intent?.fees?.protocol} {intent?.token?.symbol}\n                </p>\n              )}\n            </div>\n          </div>\n        </AccordionContent>\n      </AccordionItem>\n    </Accordion>\n  );\n};\n\nexport default FeeBreakdown;\n",
      "type": "registry:component",
      "target": "components/fast-bridge/components/fee-breakdown.tsx"
    },
    {
      "path": "registry/nexus-elements/fast-bridge/components/recipient-address.tsx",
      "content": "\"use client\";\nimport React, { FC, useState } from \"react\";\nimport { Input } from \"../../ui/input\";\nimport { Check, Edit } from \"lucide-react\";\nimport { Button } from \"../../ui/button\";\nimport { useNexus } from \"../../nexus/NexusProvider\";\nimport { type Address } from \"viem\";\n\ninterface RecipientAddressProps {\n  address?: Address;\n  onChange: (address: string) => void;\n  disabled?: boolean;\n}\n\nconst RecipientAddress: FC<RecipientAddressProps> = ({\n  address,\n  onChange,\n  disabled,\n}) => {\n  const { nexusSDK } = useNexus();\n  const [isEditing, setIsEditing] = useState(false);\n  return (\n    <div className=\"w-full\">\n      {isEditing ? (\n        <div className=\"flex items-center w-full justify-between gap-x-4\">\n          <Input\n            value={address}\n            placeholder=\"Enter Recipient Address\"\n            onChange={(e) => onChange(e.target.value)}\n            className=\"w-full\"\n          />\n          <Button\n            variant={\"ghost\"}\n            size={\"icon\"}\n            onClick={() => {\n              setIsEditing(false);\n            }}\n          >\n            <Check className=\"size-5\" />\n          </Button>\n        </div>\n      ) : (\n        <div className=\"flex items-center w-full justify-between\">\n          <p className=\"font-semibold\">Recipient Address</p>\n          <div className=\"flex items-center gap-x-3 \">\n            {address && (\n              <p className=\"font-semibold\">\n                {nexusSDK?.utils?.truncateAddress(address, 6, 6)}\n              </p>\n            )}\n\n            <Button\n              variant={\"ghost\"}\n              size={\"icon\"}\n              onClick={() => {\n                setIsEditing(true);\n              }}\n              className=\"px-0 size-6\"\n              disabled={disabled}\n            >\n              <Edit className=\"size-6\" />\n            </Button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default RecipientAddress;\n",
      "type": "registry:component",
      "target": "components/fast-bridge/components/recipient-address.tsx"
    },
    {
      "path": "registry/nexus-elements/fast-bridge/components/token-select.tsx",
      "content": "import {\n  TOKEN_METADATA,\n  type SUPPORTED_CHAINS_IDS,\n  type SUPPORTED_TOKENS,\n} from \"@avail-project/nexus-core\";\nimport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"../../ui/select\";\nimport { Label } from \"../../ui/label\";\nimport { useNexus } from \"../../nexus/NexusProvider\";\nimport { useMemo } from \"react\";\n\ninterface TokenSelectProps {\n  selectedToken?: SUPPORTED_TOKENS;\n  selectedChain: SUPPORTED_CHAINS_IDS;\n  handleTokenSelect: (token: SUPPORTED_TOKENS) => void;\n  isTestnet?: boolean;\n  disabled?: boolean;\n  label?: string;\n}\n\nconst TokenSelect = ({\n  selectedToken,\n  selectedChain,\n  handleTokenSelect,\n  isTestnet = false,\n  disabled = false,\n  label,\n}: TokenSelectProps) => {\n  const { supportedChainsAndTokens } = useNexus();\n  const tokenData = useMemo(() => {\n    return Object.values(TOKEN_METADATA);\n  }, [selectedChain, supportedChainsAndTokens]);\n\n  const selectedTokenData = tokenData?.find((token) => {\n    return token.symbol === selectedToken;\n  });\n\n  return (\n    <Select\n      value={selectedToken}\n      onValueChange={(value) =>\n        !disabled && handleTokenSelect(value as SUPPORTED_TOKENS)\n      }\n    >\n      <div className=\"flex flex-col items-start gap-y-1\">\n        {label && <Label className=\"text-sm font-semibold\">{label}</Label>}\n        <SelectTrigger disabled={disabled} className=\"w-full\">\n          <SelectValue placeholder=\"Select a token\" className=\"w-full\">\n            {selectedChain && selectedTokenData && (\n              <div className=\"flex items-center gap-x-2 w-full\">\n                <img\n                  src={selectedTokenData?.icon}\n                  alt={selectedTokenData?.symbol}\n                  width={24}\n                  height={24}\n                  className=\"rounded-full\"\n                />\n                {selectedToken}\n              </div>\n            )}\n          </SelectValue>\n        </SelectTrigger>\n      </div>\n\n      <SelectContent>\n        <SelectGroup>\n          {tokenData?.map((token) => (\n            <SelectItem key={token.symbol} value={token.symbol}>\n              <div className=\"flex items-center gap-x-2 my-1\">\n                <img\n                  src={token.icon}\n                  alt={token.symbol}\n                  width={24}\n                  height={24}\n                  className=\"rounded-full\"\n                />\n                <div className=\"flex flex-col\">\n                  <span>\n                    {isTestnet ? `${token.symbol} (Testnet)` : token.symbol}\n                  </span>\n                </div>\n              </div>\n            </SelectItem>\n          ))}\n        </SelectGroup>\n      </SelectContent>\n    </Select>\n  );\n};\n\nexport default TokenSelect;\n",
      "type": "registry:component",
      "target": "components/fast-bridge/components/token-select.tsx"
    },
    {
      "path": "registry/nexus-elements/fast-bridge/components/transaction-progress.tsx",
      "content": "import { Check, Circle, LoaderPinwheel } from \"lucide-react\";\nimport React, { FC, memo, useMemo } from \"react\";\nimport {\n  type BridgeStepType,\n  type SwapStepType,\n} from \"@avail-project/nexus-core\";\n\ntype ProgressStep = BridgeStepType | SwapStepType;\n\ninterface TransactionProgressProps {\n  timer: number;\n  steps: Array<{ id: number; completed: boolean; step: ProgressStep }>;\n  viewIntentUrl?: string;\n  operationType?: string;\n}\n\nexport const getOperationText = (type: string) => {\n  switch (type) {\n    case \"bridge\":\n      return \"Transaction\";\n    case \"transfer\":\n      return \"Transferring\";\n    case \"bridgeAndExecute\":\n      return \"Bridge & Execute\";\n    case \"swap\":\n      return \"Swapping\";\n    default:\n      return \"Processing\";\n  }\n};\n\ntype DisplayStep = { id: string; label: string; completed: boolean };\n\nconst StepList: FC<{ steps: DisplayStep[]; currentIndex: number }> = memo(\n  ({ steps, currentIndex }) => {\n    return (\n      <div className=\"w-full mt-6 space-y-6\">\n        {steps.map((s, idx) => {\n          const isCompleted = !!s.completed;\n          const isCurrent = currentIndex === -1 ? false : idx === currentIndex;\n\n          let rightIcon = <Circle className=\"size-5 text-muted-foreground\" />;\n          if (isCompleted) {\n            rightIcon = <Check className=\"size-5 text-green-600\" />;\n          } else if (isCurrent) {\n            rightIcon = (\n              <LoaderPinwheel className=\"size-5 animate-spin text-muted-foreground\" />\n            );\n          }\n\n          return (\n            <div\n              key={s.id}\n              className=\"flex items-center justify-between w-full\"\n            >\n              <div className=\"flex items-center gap-x-3\">\n                <span className=\"text-base font-semibold\">{s.label}</span>\n              </div>\n              {rightIcon}\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n);\n\nconst TransactionProgress: FC<TransactionProgressProps> = ({\n  timer,\n  steps,\n  viewIntentUrl,\n  operationType = \"bridge\",\n}) => {\n  const totalSteps = Array.isArray(steps) ? steps.length : 0;\n  const completedSteps = Array.isArray(steps)\n    ? steps.reduce((acc, s) => acc + (s?.completed ? 1 : 0), 0)\n    : 0;\n  const percent = totalSteps > 0 ? completedSteps / totalSteps : 0;\n  const allCompleted = percent >= 1;\n  const opText = getOperationText(operationType);\n  const headerText = allCompleted\n    ? `${opText} Completed`\n    : `${opText} In Progress...`;\n  const ctaText = allCompleted ? `View Explorer` : \"View Intent\";\n\n  const { effectiveSteps, currentIndex } = useMemo(() => {\n    const milestones = [\n      \"Intent verified\",\n      \"Collected on sources\",\n      \"Filled on destination\",\n    ];\n    const thresholds = milestones.map(\n      (_, idx) => (idx + 1) / milestones.length\n    );\n    const displaySteps: DisplayStep[] = milestones.map((label, idx) => ({\n      id: `M${idx}`,\n      label,\n      completed: percent >= thresholds[idx],\n    }));\n    const current = displaySteps.findIndex((st) => !st.completed);\n    return { effectiveSteps: displaySteps, currentIndex: current };\n  }, [percent, opText]);\n\n  return (\n    <div className=\"w-full flex flex-col items-center\">\n      <div className=\"flex flex-col items-center gap-y-3\">\n        {allCompleted ? (\n          <Check className=\"size-6 text-green-600\" />\n        ) : (\n          <LoaderPinwheel className=\"size-6 animate-spin\" />\n        )}\n        <p>{headerText}</p>\n        <div className=\"flex items-center justify-center w-full\">\n          <span className=\"text-2xl font-semibold font-nexus-primary text-nexus-black\">\n            {Math.floor(timer)}\n          </span>\n          <span className=\"text-base font-semibold font-nexus-primary text-nexus-black\">\n            .\n          </span>\n          <span className=\"text-base font-semibold font-nexus-primary text-nexus-muted-secondary\">\n            {String(Math.floor((timer % 1) * 1000)).padStart(3, \"0\")}s\n          </span>\n        </div>\n      </div>\n\n      <StepList steps={effectiveSteps} currentIndex={currentIndex} />\n\n      {viewIntentUrl && (\n        <a\n          href={viewIntentUrl}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          className=\"mt-8 underline font-semibold\"\n        >\n          {ctaText}\n        </a>\n      )}\n    </div>\n  );\n};\n\nexport default TransactionProgress;\n",
      "type": "registry:component",
      "target": "components/fast-bridge/components/transaction-progress.tsx"
    },
    {
      "path": "registry/nexus-elements/fast-bridge/hooks/useBridge.tsx",
      "content": "import {\n  type BridgeStepType,\n  NEXUS_EVENTS,\n  type NexusNetwork,\n  NexusSDK,\n  type OnAllowanceHookData,\n  type OnIntentHookData,\n  SUPPORTED_CHAINS,\n  type SUPPORTED_CHAINS_IDS,\n  type SUPPORTED_TOKENS,\n  type UserAsset,\n} from \"@avail-project/nexus-core\";\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { type Address, isAddress } from \"viem\";\nimport { useNexus } from \"../../nexus/NexusProvider\";\n\nexport interface FastBridgeState {\n  chain: SUPPORTED_CHAINS_IDS;\n  token: SUPPORTED_TOKENS;\n  amount?: string;\n  recipient?: `0x${string}`;\n}\n\ninterface UseBridgeProps {\n  network: NexusNetwork;\n  connectedAddress: Address;\n  nexusSDK: NexusSDK | null;\n  intent: OnIntentHookData | null;\n  setIntent: React.Dispatch<React.SetStateAction<OnIntentHookData | null>>;\n  setAllowance: React.Dispatch<\n    React.SetStateAction<OnAllowanceHookData | null>\n  >;\n  unifiedBalance: UserAsset[] | null;\n  prefill?: {\n    token: string;\n    chainId: number;\n    amount?: string;\n    recipient?: Address;\n  };\n  onComplete?: () => void;\n}\n\nconst buildInitialInputs = (\n  network: NexusNetwork,\n  connectedAddress: Address,\n  prefill?: {\n    token: string;\n    chainId: number;\n    amount?: string;\n    recipient?: Address;\n  }\n): FastBridgeState => {\n  return {\n    chain:\n      (prefill?.chainId as SUPPORTED_CHAINS_IDS) ??\n      (network === \"testnet\"\n        ? SUPPORTED_CHAINS.SEPOLIA\n        : SUPPORTED_CHAINS.ETHEREUM),\n    token: (prefill?.token as SUPPORTED_TOKENS) ?? \"USDC\",\n    amount: prefill?.amount ?? undefined,\n    recipient: (prefill?.recipient as `0x${string}`) ?? connectedAddress,\n  };\n};\n\nconst useBridge = ({\n  network,\n  connectedAddress,\n  nexusSDK,\n  intent,\n  setIntent,\n  setAllowance,\n  unifiedBalance,\n  prefill,\n  onComplete,\n}: UseBridgeProps) => {\n  const { fetchUnifiedBalance, handleNexusError } = useNexus();\n  const [inputs, setInputs] = useState<FastBridgeState>(() =>\n    buildInitialInputs(network, connectedAddress, prefill)\n  );\n\n  const [timer, setTimer] = useState(0);\n  const [startTxn, setStartTxn] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [refreshing, setRefreshing] = useState(false);\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [txError, setTxError] = useState<string | null>(null);\n  const [lastExplorerUrl, setLastExplorerUrl] = useState<string>(\"\");\n  const timerRef = useRef<NodeJS.Timeout | null>(null);\n  const commitLockRef = useRef<boolean>(false);\n  const [steps, setSteps] = useState<\n    Array<{ id: number; completed: boolean; step: BridgeStepType }>\n  >([]);\n\n  const areInputsValid = useMemo(() => {\n    const hasToken = inputs?.token !== undefined && inputs?.token !== null;\n    const hasChain = inputs?.chain !== undefined && inputs?.chain !== null;\n    const hasAmount = Boolean(inputs?.amount) && Number(inputs?.amount) > 0;\n    const hasValidrecipient =\n      Boolean(inputs?.recipient) && isAddress(inputs?.recipient as string);\n    return hasToken && hasChain && hasAmount && hasValidrecipient;\n  }, [inputs]);\n\n  const handleTransaction = async () => {\n    if (\n      !inputs?.amount ||\n      !inputs?.recipient ||\n      !inputs?.chain ||\n      !inputs?.token\n    ) {\n      console.error(\"Missing required inputs\");\n      return;\n    }\n    setLoading(true);\n    setTxError(null);\n    try {\n      if (inputs?.recipient !== connectedAddress) {\n        // Transfer\n        const transferTxn = await nexusSDK?.bridgeAndTransfer(\n          {\n            token: inputs?.token,\n            amount: inputs?.amount,\n            toChainId: inputs?.chain,\n            recipient: inputs?.recipient,\n          },\n          {\n            onEvent: (event) => {\n              if (event.name === NEXUS_EVENTS.STEPS_LIST) {\n                const list = Array.isArray(event.args) ? event.args : [];\n                setSteps((prev) => {\n                  const completedTypes = new Set<string>();\n                  for (const prevStep of prev) {\n                    if (prevStep.completed) {\n                      completedTypes.add(prevStep.step?.typeID ?? \"\");\n                    }\n                  }\n                  const nextSteps: Array<{\n                    id: number;\n                    completed: boolean;\n                    step: BridgeStepType;\n                  }> = [];\n                  for (let index = 0; index < list.length; index++) {\n                    const step = list[index];\n                    nextSteps.push({\n                      id: index,\n                      completed: completedTypes.has(step?.typeID ?? \"\"),\n                      step,\n                    });\n                  }\n                  return nextSteps;\n                });\n              }\n              if (event.name === NEXUS_EVENTS.STEP_COMPLETE) {\n                const step = event.args;\n                setSteps((prev) => {\n                  const updated: Array<{\n                    id: number;\n                    completed: boolean;\n                    step: BridgeStepType;\n                  }> = [];\n                  for (const s of prev) {\n                    if (s?.step?.typeID === step?.typeID) {\n                      updated.push({ ...s, completed: true });\n                    } else {\n                      updated.push(s);\n                    }\n                  }\n                  return updated;\n                });\n              }\n            },\n          }\n        );\n        if (!transferTxn) {\n          throw new Error(\"Transaction rejected by user\");\n        }\n        if (transferTxn) {\n          setLastExplorerUrl(transferTxn.explorerUrl);\n          await onSuccess();\n        }\n        return;\n      }\n      // Bridge\n      const bridgeTxn = await nexusSDK?.bridge(\n        {\n          token: inputs?.token,\n          amount: inputs?.amount,\n          toChainId: inputs?.chain,\n        },\n        {\n          onEvent: (event) => {\n            if (event.name === NEXUS_EVENTS.STEPS_LIST) {\n              const list = Array.isArray(event.args) ? event.args : [];\n              setSteps((prev) => {\n                const completedTypes = new Set<string>();\n                for (const prevStep of prev) {\n                  if (prevStep.completed) {\n                    completedTypes.add(prevStep.step?.typeID ?? \"\");\n                  }\n                }\n                const nextSteps: Array<{\n                  id: number;\n                  completed: boolean;\n                  step: BridgeStepType;\n                }> = [];\n                for (let index = 0; index < list.length; index++) {\n                  const step = list[index];\n                  nextSteps.push({\n                    id: index,\n                    completed: completedTypes.has(step?.typeID ?? \"\"),\n                    step,\n                  });\n                }\n                return nextSteps;\n              });\n            }\n            if (event.name === NEXUS_EVENTS.STEP_COMPLETE) {\n              const step = event.args;\n              setSteps((prev) => {\n                const updated: Array<{\n                  id: number;\n                  completed: boolean;\n                  step: BridgeStepType;\n                }> = [];\n                for (const s of prev) {\n                  if (s?.step?.typeID === step?.typeID) {\n                    updated.push({ ...s, completed: true });\n                  } else {\n                    updated.push(s);\n                  }\n                }\n                return updated;\n              });\n            }\n          },\n        }\n      );\n      if (!bridgeTxn) {\n        throw new Error(\"Transaction rejected by user\");\n      }\n      if (bridgeTxn) {\n        setLastExplorerUrl(bridgeTxn.explorerUrl);\n        await onSuccess();\n      }\n    } catch (error) {\n      const { message } = handleNexusError(error);\n      setTxError(message);\n      setIsDialogOpen(false);\n    } finally {\n      setLoading(false);\n      setStartTxn(false);\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n        timerRef.current = null;\n      }\n    }\n  };\n\n  const onSuccess = async () => {\n    // Close dialog and stop timer on success\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n    onComplete?.();\n    setStartTxn(false);\n    setIntent(null);\n    setAllowance(null);\n    setInputs(buildInitialInputs(network, connectedAddress, prefill));\n    setRefreshing(false);\n    await fetchUnifiedBalance();\n  };\n\n  const filteredUnifiedBalance = useMemo(() => {\n    return unifiedBalance?.find((bal) => bal?.symbol === inputs?.token);\n  }, [unifiedBalance, inputs?.token]);\n\n  const refreshIntent = async () => {\n    setRefreshing(true);\n    try {\n      await intent?.refresh([]);\n    } catch (error) {\n      console.error(\"Transaction failed:\", error);\n    } finally {\n      setRefreshing(false);\n    }\n  };\n\n  const reset = () => {\n    intent?.deny();\n    setIntent(null);\n    setAllowance(null);\n    setInputs(buildInitialInputs(network, connectedAddress, prefill));\n    setLoading(false);\n    setStartTxn(false);\n    setRefreshing(false);\n  };\n\n  const startTransaction = () => {\n    // Reset timer for a fresh run\n    setTimer(0);\n    setStartTxn(true);\n    intent?.allow();\n    setIsDialogOpen(true);\n    setTxError(null);\n  };\n\n  const commitAmount = async () => {\n    if (commitLockRef.current) return;\n    if (intent || loading || txError || !areInputsValid) return;\n    commitLockRef.current = true;\n    try {\n      await handleTransaction();\n    } finally {\n      commitLockRef.current = false;\n    }\n  };\n\n  useEffect(() => {\n    let interval: NodeJS.Timeout;\n    if (intent) {\n      interval = setInterval(refreshIntent, 5000);\n    }\n    return () => {\n      clearInterval(interval);\n    };\n  }, [intent]);\n\n  useEffect(() => {\n    if (startTxn) {\n      timerRef.current = setInterval(() => {\n        setTimer((prev) => prev + 0.1);\n      }, 100);\n    }\n\n    return () => {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n        timerRef.current = null;\n      }\n    };\n  }, [startTxn]);\n\n  useEffect(() => {\n    if (intent) {\n      intent.deny();\n      setIntent(null);\n    }\n  }, [inputs]);\n\n  useEffect(() => {\n    if (!isDialogOpen) {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n        timerRef.current = null;\n      }\n      setStartTxn(false);\n    }\n  }, [isDialogOpen]);\n\n  useEffect(() => {\n    if (txError) {\n      setTxError(null);\n    }\n  }, [inputs]);\n\n  const stopTimer = () => {\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n    setStartTxn(false);\n  };\n\n  return {\n    inputs,\n    setInputs,\n    timer,\n    setIsDialogOpen,\n    setTxError,\n    loading,\n    refreshing,\n    isDialogOpen,\n    txError,\n    handleTransaction,\n    reset,\n    filteredUnifiedBalance,\n    startTransaction,\n    stopTimer,\n    commitAmount,\n    lastExplorerUrl,\n    steps,\n  };\n};\n\nexport default useBridge;\n",
      "type": "registry:component",
      "target": "components/fast-bridge/hooks/useBridge.tsx"
    }
  ]
}