{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "unified-balance",
  "type": "registry:component",
  "title": "Unified Balance",
  "description": "A simple component built with Nexus to display unified balance",
  "dependencies": [
    "@avail-project/nexus-core@1.0.0-beta.56",
    "lucide-react",
    "@radix-ui/react-accordion",
    "@radix-ui/react-label",
    "@radix-ui/react-slot",
    "@radix-ui/react-tabs"
  ],
  "registryDependencies": [
    "https://develop.elements.nexus.availproject.org/r/accordion.json",
    "https://develop.elements.nexus.availproject.org/r/button.json",
    "https://develop.elements.nexus.availproject.org/r/nexus-provider.json",
    "https://develop.elements.nexus.availproject.org/r/label.json",
    "https://develop.elements.nexus.availproject.org/r/separator.json",
    "https://develop.elements.nexus.availproject.org/r/tabs.json"
  ],
  "files": [
    {
      "path": "registry/nexus-elements/unified-balance/unified-balance.tsx",
      "content": "\"use client\";\nimport React, { memo, useMemo } from \"react\";\nimport { useNexus } from \"../nexus/NexusProvider\";\nimport { Label } from \"../ui/label\";\nimport { DollarSign } from \"lucide-react\";\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from \"../ui/accordion\";\nimport { Separator } from \"../ui/separator\";\nimport { cn } from \"@/lib/utils\";\nimport { NexusSDK, type UserAsset } from \"@avail-project/nexus-core\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"../ui/tabs\";\n\nconst BalanceBreakdown = ({\n  className,\n  totalFiat,\n  tokens,\n  nexusSDK,\n}: {\n  totalFiat: string;\n  tokens: UserAsset[];\n  nexusSDK: NexusSDK | null;\n  className?: string;\n}) => {\n  return (\n    <div className={cn(className)}>\n      <div className=\"flex items-center justify-start w-full\">\n        <Label className=\"font-semibold text-muted-foreground\">\n          Total Balance:\n        </Label>\n\n        <Label className=\"text-lg font-bold gap-x-0\">\n          <DollarSign className=\"w-4 h-4 font-bold\" strokeWidth={3} />\n          {totalFiat}\n        </Label>\n      </div>\n      <Accordion type=\"single\" collapsible className=\"w-full space-y-4\">\n        {tokens.map((token) => {\n          const positiveBreakdown = token.breakdown.filter(\n            (chain) => Number.parseFloat(chain.balance) > 0\n          );\n          const chainsCount = positiveBreakdown.length;\n          const chainsLabel =\n            chainsCount > 1 ? `${chainsCount} chains` : `${chainsCount} chain`;\n          return (\n            <AccordionItem\n              key={token.symbol}\n              value={token.symbol}\n              className=\"px-4\"\n            >\n              <AccordionTrigger\n                className=\"hover:no-underline cursor-pointer items-center\"\n                hideChevron={false}\n              >\n                <div className=\"flex items-center justify-between w-full\">\n                  <div className=\"flex sm:flex-row flex-col items-center gap-3\">\n                    <div className=\"relative size-6 sm:size-8\">\n                      {token.icon && (\n                        <img\n                          src={token.icon}\n                          alt={token.symbol}\n                          className=\"rounded-full size-full\"\n                          loading=\"lazy\"\n                          decoding=\"async\"\n                        />\n                      )}\n                    </div>\n                    <div className=\"text-left\">\n                      <h3 className=\"font-semibold sm:block hidden\">\n                        {token.symbol}\n                      </h3>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {chainsLabel}\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"flex flex-col items-end\">\n                      <p className=\"text-base font-medium\">\n                        {nexusSDK?.utils?.formatTokenBalance(token.balance, {\n                          symbol: token.symbol,\n                          decimals: token.decimals,\n                        })}\n                      </p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        ${token.balanceInFiat.toFixed(2)}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </AccordionTrigger>\n              <AccordionContent>\n                <div className=\"space-y-3 py-2\">\n                  {positiveBreakdown.map((chain, index) => (\n                    <React.Fragment key={chain.chain.id}>\n                      <div className=\"flex items-center justify-between px-2 py-1 rounded-md\">\n                        <div className=\"flex items-center gap-2\">\n                          <div className=\"relative size-4  sm:size-6\">\n                            <img\n                              src={chain?.chain?.logo}\n                              alt={chain.chain.name}\n                              sizes=\"100%\"\n                              className=\"rounded-full size-full\"\n                              loading=\"lazy\"\n                              decoding=\"async\"\n                            />\n                          </div>\n                          <span className=\"text-sm sm:block hidden\">\n                            {chain.chain.name}\n                          </span>\n                        </div>\n                        <div className=\"text-right\">\n                          <p className=\"text-sm font-medium\">\n                            {nexusSDK?.utils?.formatTokenBalance(\n                              chain.balance,\n                              {\n                                symbol: token.symbol,\n                                decimals: token.decimals,\n                              }\n                            )}\n                          </p>\n                          <p className=\"text-xs text-muted-foreground\">\n                            ${chain.balanceInFiat.toFixed(2)}\n                          </p>\n                        </div>\n                      </div>\n                      {index < positiveBreakdown.length - 1 && (\n                        <Separator className=\"my-2\" />\n                      )}\n                    </React.Fragment>\n                  ))}\n                </div>\n              </AccordionContent>\n            </AccordionItem>\n          );\n        })}\n      </Accordion>\n    </div>\n  );\n};\n\nconst UnifiedBalance = ({ className }: { className?: string }) => {\n  const { bridgableBalance, swapBalance, nexusSDK } = useNexus();\n\n  const totalFiat = useMemo(() => {\n    if (!bridgableBalance) return \"0.00\";\n\n    return bridgableBalance\n      .reduce((acc, fiat) => acc + fiat.balanceInFiat, 0)\n      .toFixed(2);\n  }, [bridgableBalance, swapBalance]);\n\n  const swapTotalFiat = useMemo(() => {\n    if (!swapBalance) return \"0.00\";\n    return swapBalance\n      .reduce((acc, fiat) => acc + fiat.balanceInFiat, 0)\n      .toFixed(2);\n  }, [swapBalance]);\n\n  const tokens = useMemo(\n    () =>\n      bridgableBalance?.filter(\n        (token) => Number.parseFloat(token.balance) > 0\n      ) ?? [],\n    [bridgableBalance]\n  );\n\n  const swapTokens = useMemo(\n    () =>\n      swapBalance?.filter((token) => Number.parseFloat(token.balance) > 0) ??\n      [],\n    [swapBalance]\n  );\n\n  if (!swapBalance) {\n    return (\n      <BalanceBreakdown\n        totalFiat={totalFiat}\n        tokens={tokens}\n        nexusSDK={nexusSDK}\n        className=\"w-full max-w-lg mx-auto py-4 px-1 sm:p-4 flex flex-col gap-y-2 items-center overflow-y-scroll max-h-[372px] rounded-lg border border-border\"\n      />\n    );\n  }\n\n  return (\n    <Tabs\n      defaultValue=\"bridgeBalance\"\n      className=\"w-full max-w-lg py-4 px-1 sm:p-4 flex flex-col gap-y-2 items-center rounded-lg border border-border\"\n    >\n      <TabsList className=\"w-full\">\n        <TabsTrigger value=\"bridgeBalance\">\n          <p className=\"text-sm font-medium\">Bridgeable Balance</p>\n        </TabsTrigger>\n        <TabsTrigger value=\"swapBalance\">\n          <p className=\"text-sm font-medium\">Swappable Balance</p>\n        </TabsTrigger>\n      </TabsList>\n      <TabsContent\n        value=\"bridgeBalance\"\n        className=\"w-full overflow-y-scroll max-h-[372px] pt-6 no-scrollbar\"\n      >\n        <BalanceBreakdown\n          totalFiat={totalFiat}\n          tokens={tokens}\n          nexusSDK={nexusSDK}\n          className={className}\n        />\n      </TabsContent>\n      <TabsContent\n        value=\"swapBalance\"\n        className=\"w-full overflow-y-scroll max-h-[372px] pt-6 no-scrollbar\"\n      >\n        <BalanceBreakdown\n          totalFiat={swapTotalFiat}\n          tokens={swapTokens}\n          nexusSDK={nexusSDK}\n          className={className}\n        />\n      </TabsContent>\n    </Tabs>\n  );\n};\nUnifiedBalance.displayName = \"UnifiedBalance\";\nexport default memo(UnifiedBalance);\n",
      "type": "registry:component",
      "target": "components/unified-balance/unified-balance.tsx"
    }
  ]
}