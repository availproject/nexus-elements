{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "nexus-provider",
  "type": "registry:component",
  "title": "Nexus Provider",
  "description": "Shared Nexus SDK provider and types for Nexus Elements",
  "dependencies": [
    "@avail-project/nexus-core"
  ],
  "files": [
    {
      "path": "registry/nexus-elements/nexus/NexusProvider.tsx",
      "content": "\"use client\";\nimport {\n  EthereumProvider,\n  NexusNetwork,\n  NexusSDK,\n  OnAllowanceHookData,\n  OnIntentHookData,\n  SupportedChainsResult,\n  UserAsset,\n} from \"@avail-project/nexus-core\";\nimport {\n  createContext,\n  useCallback,\n  useContext,\n  useMemo,\n  useState,\n} from \"react\";\nimport { NexusContextType } from \"./types\";\n\nconst NexusContext = createContext<NexusContextType | undefined>(undefined);\nconst NexusProvider = ({\n  children,\n  config = {\n    network: \"mainnet\",\n    debug: true,\n  },\n}: {\n  children: React.ReactNode;\n  config?: {\n    network?: NexusNetwork;\n    debug?: boolean;\n  };\n}) => {\n  const sdk = useMemo(() => new NexusSDK(config), [config]);\n  const [nexusSDK, setNexusSDK] = useState<NexusSDK | null>(null);\n  const [supportedChainsAndTokens, setSupportedChainsAndTokens] =\n    useState<SupportedChainsResult | null>(null);\n  const [unifiedBalance, setUnifiedBalance] = useState<UserAsset[] | null>(\n    null,\n  );\n  const [intent, setIntent] = useState<OnIntentHookData | null>(null);\n  const [allowance, setAllowance] = useState<OnAllowanceHookData | null>(null);\n\n  const initializeNexus = async (provider: EthereumProvider) => {\n    try {\n      if (sdk.isInitialized()) throw new Error(\"Nexus is already initialized\");\n      await sdk.initialize(provider);\n      setNexusSDK(sdk);\n      const unifiedBalance = await sdk?.getUnifiedBalances();\n      setUnifiedBalance(unifiedBalance);\n      const supportedChainsAndTokens = sdk?.utils?.getSupportedChains(\n        config?.network === \"testnet\" ? 0 : undefined,\n      );\n      setSupportedChainsAndTokens(supportedChainsAndTokens);\n    } catch (error) {\n      console.error(\"Error initializing Nexus:\", error);\n    }\n  };\n\n  const deinitializeNexus = async () => {\n    try {\n      if (!sdk.isInitialized()) throw new Error(\"Nexus is not initialized\");\n      await sdk.deinit();\n      setNexusSDK(null);\n    } catch (error) {\n      console.error(\"Error deinitializing Nexus:\", error);\n    }\n  };\n\n  const attachEventHooks = () => {\n    sdk.setOnAllowanceHook((data: OnAllowanceHookData) => {\n      setAllowance(data);\n    });\n\n    sdk.setOnIntentHook((data) => {\n      setIntent(data);\n    });\n  };\n\n  const handleInit = useCallback(\n    async (provider: EthereumProvider) => {\n      if (sdk.isInitialized()) {\n        console.log(\"Nexus already initialized\");\n        return;\n      }\n      await initializeNexus(provider);\n      attachEventHooks();\n    },\n    [sdk],\n  );\n\n  const value = useMemo(\n    () => ({\n      nexusSDK,\n      initializeNexus,\n      deinitializeNexus,\n      attachEventHooks,\n      intent,\n      setIntent,\n      allowance,\n      setAllowance,\n      handleInit,\n      supportedChainsAndTokens,\n      unifiedBalance,\n      network: config?.network,\n    }),\n    [\n      nexusSDK,\n      initializeNexus,\n      deinitializeNexus,\n      attachEventHooks,\n      intent,\n      setIntent,\n      allowance,\n      setAllowance,\n      handleInit,\n      supportedChainsAndTokens,\n      unifiedBalance,\n      config,\n    ],\n  );\n  return (\n    <NexusContext.Provider value={value}>{children}</NexusContext.Provider>\n  );\n};\n\nexport function useNexus() {\n  const context = useContext(NexusContext);\n  if (!context) {\n    throw new Error(\"useNexus must be used within a NexusProvider\");\n  }\n  return context;\n}\n\nexport default NexusProvider;\n",
      "type": "registry:component",
      "target": "components/nexus/NexusProvider.tsx"
    },
    {
      "path": "registry/nexus-elements/nexus/types.ts",
      "content": "import * as React from \"react\";\nimport {\n  EthereumProvider,\n  NexusNetwork,\n  NexusSDK,\n  OnAllowanceHookData,\n  OnIntentHookData,\n  SupportedChainsResult,\n  UserAsset,\n} from \"@avail-project/nexus-core\";\n\nexport interface NexusContextType {\n  nexusSDK: NexusSDK | null;\n  unifiedBalance: UserAsset[] | null;\n  initializeNexus: (provider: EthereumProvider) => Promise<void>;\n  deinitializeNexus: () => Promise<void>;\n  attachEventHooks: () => void;\n  intent: OnIntentHookData | null;\n  setIntent: React.Dispatch<React.SetStateAction<OnIntentHookData | null>>;\n  allowance: OnAllowanceHookData | null;\n  setAllowance: React.Dispatch<\n    React.SetStateAction<OnAllowanceHookData | null>\n  >;\n  handleInit: (provider: EthereumProvider) => Promise<void>;\n  supportedChainsAndTokens: SupportedChainsResult | null;\n  network?: NexusNetwork;\n}\n",
      "type": "registry:component",
      "target": "components/nexus/types.ts"
    }
  ]
}